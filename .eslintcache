[{"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\index.js":"1","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\aws-exports.js":"2","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\reportWebVitals.js":"3","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\App.js":"4","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModal.js":"5","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModalDropdown.js":"6","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModalCheckbox.js":"7"},{"size":4365,"mtime":1614238999772,"results":"8","hashOfConfig":"9"},{"size":489,"mtime":1614250934311,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":499162500000,"results":"11","hashOfConfig":"9"},{"size":8237,"mtime":1614259534337,"results":"12","hashOfConfig":"9"},{"size":8089,"mtime":1612677588442,"results":"13","hashOfConfig":"9"},{"size":430,"mtime":1612680731915,"results":"14","hashOfConfig":"9"},{"size":587,"mtime":1612677591225,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"6a829z",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25","usedDeprecatedRules":"18"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28","usedDeprecatedRules":"18"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"18"},"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\index.js",[],["36","37"],"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\aws-exports.js",[],"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\reportWebVitals.js",[],"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\App.js",["38","39"],"import React, { Component } from 'react';\r\nimport { DayPilot, DayPilotCalendar, DayPilotNavigator } from \"daypilot-pro-react\";\r\nimport \"./CalendarStyles.css\";\r\nimport axios from 'axios';\r\nimport Modal from 'react-modal'\r\nimport CustModal from './CustModal'\r\nimport { withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\r\n\r\nModal.setAppElement('#root')\r\n\r\n//coming from laptop\r\nconst styles = {\r\n  wrap: {\r\n    display: \"flex\"\r\n  },\r\n  left: {\r\n    marginRight: \"10px\"\r\n  },\r\n  main: {\r\n    flexGrow: \"1\"\r\n  }\r\n};\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      viewType: \"Week\",\r\n      durationBarVisible: false,\r\n      timeRangeSelectedHandling: \"Enabled\",\r\n      onTimeRangeSelected: args => {\r\n        this.calendar.clearSelection();\r\n        // console.log(typeof(args.start)+\" \"+ args.start)\r\n        // console.log(typeof(args.end)+\" \"+ args.end)      \r\n        // console.log(args.end.value)      \r\n\r\n        this.setState({\r\n          modalStartDate: args.start.value,\r\n          modalEndDate: args.end.value,\r\n          isOpen: true\r\n        })\r\n        // DayPilot.Modal.prompt(\"Create a new event hello:\", \"Event 1\").then(function (modal) {\r\n        //   dp.clearSelection();\r\n        //   if (!modal.result) { return; }\r\n        //   dp.events.add(new DayPilot.Event({\r\n        //     start: args.start,\r\n        //     end: args.end,\r\n        //     id: DayPilot.guid(),\r\n        //     text: modal.result\r\n        //   }));\r\n        // });\r\n      },\r\n      // onTimeRangeSelected: args => {\r\n      // <Modal \r\n      // isOpen={this.state.isOpen}\r\n      // onRequestClose={this.showModal}\r\n      // shouldCLooseOnOverlayClick={this.hideModal}>\r\n      //     <h1>Modal Title</h1>\r\n      //     <h2>Modal Body</h2>\r\n      //     <button onClick={this.hideModal}></button>\r\n      // </Modal>\r\n      // },\r\n      eventDeleteHandling: \"Update\",\r\n      onEventClick: args => {\r\n        let dp = this.calendar;\r\n        DayPilot.Modal.prompt(\"Update event text:\", args.e.text()).then(function (modal) {\r\n          if (!modal.result) { return; }\r\n          args.e.data.text = modal.result;\r\n          dp.events.update(args.e);\r\n        });\r\n      },\r\n      events: [],\r\n      isOpen: false,\r\n      modalStartDate: \"\",\r\n      modalEndDate: \"\"\r\n    };\r\n\r\n    this.showModal = this.showModal.bind(this);\r\n    this.hideModal = this.hideModal.bind(this);\r\n    this.dateFormatter = this.dateFormatter.bind(this);\r\n    this.getAllBookings = this.getAllBookings.bind(this);\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({ isOpen: true });\r\n    this.getAllBookings();\r\n    // console.log(\"i am clicked\")\r\n  };\r\n\r\n  hideModal = () => {\r\n    this.setState({ isOpen: false });\r\n    this.getAllBookings();\r\n    // console.log(\"i am clicked\")\r\n  };\r\n\r\n  dateFormatter(input) {\r\n    let st = new Date(input * 1000)\r\n    // Hours part from the timestamp\r\n    var year = st.getFullYear()\r\n    var month = (st.getMonth() + 1) < 10 ? (\"0\" + (st.getMonth() + 1)) : (st.getMonth() + 1);\r\n    var day = (st.getDate()) < 10 ? (\"0\" + (st.getDate())) : (st.getDate());\r\n    var hour = st.getHours() < 10 ? \"0\" + st.getHours() : st.getHours()\r\n    var minute = st.getMinutes() < 10 ? \"0\" + st.getMinutes() : st.getMinutes()\r\n    var second = st.getSeconds() < 10 ? \"0\" + st.getSeconds() : st.getSeconds()\r\n    // Minutes part from the timestamp\r\n    // Seconds part from the timestamp\r\n    let out = year + \"-\" + month + \"-\" + day + \"T\" + hour + \":\" + minute + \":\" + second\r\n    // console.log(out)\r\n    return out\r\n  }\r\n  getAllBookings() { //change this to per month instead of per current week\r\n    let today = new Date();\r\n    let dateNumber = today.getDay();\r\n    let monthNumber = today.getMonth();\r\n    let yearNumber = today.getFullYear();\r\n    let lastSunday = today.setDate(today.getDate() - dateNumber)\r\n    let lastSundayDate = new Date(lastSunday)\r\n    let lastSunDateTime = this.dateFormatter(lastSundayDate / 1000).substring(0, 10) + \"T00:00:00.000Z\"\r\n    console.log(\"last sundate\", lastSunDateTime)\r\n    let nextSaturday = lastSundayDate.setDate(lastSundayDate.getDate() + 6)\r\n    let nextSaturdayDate = new Date(nextSaturday)\r\n    let nextSaturDateTime = this.dateFormatter(nextSaturdayDate / 1000).substring(0, 10) + \"T00:00:00.000Z\"\r\n    console.log(\"next saturdate\", nextSaturDateTime)\r\n    switch (monthNumber) {\r\n      case 1:\r\n      case 3:\r\n      case 5:\r\n      case 7:\r\n      case 8:\r\n      case 10:\r\n      case 12: dateNumber = 31; break;\r\n      case 2: dateNumber = yearNumber % 4 == 0 ? 29 : 28\r\n      default: dateNumber = 30; break;\r\n    }\r\n\r\n    lastSunDateTime = this.dateFormatter(new Date(yearNumber,monthNumber,1) / 1000).substring(0, 10)+\"T00:00:00.000Z\"\r\n    console.log(\"last sundate\", lastSunDateTime)\r\n\r\n    nextSaturDateTime= this.dateFormatter(new Date(yearNumber,monthNumber,dateNumber) / 1000).substring(0, 10)+\"T00:00:00.000Z\"\r\n    console.log(\"next saturdate\", nextSaturDateTime)\r\n\r\n    let sundayToSend = ((new Date(lastSunDateTime)) / 1000 + 3600 * 7)\r\n    let saturdayToSend = ((new Date(nextSaturDateTime)) / 1000 + 3600 * 7)\r\n\r\n\r\n    console.log(\"sundayToSend\", sundayToSend, \"saturdayToSend\", saturdayToSend)\r\n    axios.get(\"https://0q7lvp0ual.execute-api.ap-northeast-2.amazonaws.com/dev/getbookingbystarttimeandendtime?StartTime=\" + sundayToSend + \"&EndTime=\" + saturdayToSend)\r\n      .then(response => {\r\n        console.log(response.data)\r\n        const thisEvents = response.data.message1.Items.map(items => {\r\n          return {\r\n            'id': items.ID,\r\n            'text': items.CustId,\r\n            'start': this.dateFormatter(items.StartTime),\r\n            'end': this.dateFormatter(items.EndTime)\r\n          }\r\n        })\r\n        // console.log(thisEvents)\r\n        this.setState({ events: thisEvents })\r\n      })\r\n      .catch(error => console.error(error))\r\n  }\r\n  componentDidMount() {\r\n    this.getAllBookings()\r\n    let today = new Date();\r\n    let unix_timestamp = Math.round(((today).getTime()) + 3600 * 7) / 1000\r\n\r\n    var date = new Date(unix_timestamp * 1000);\r\n    var day = (date.getDate()) < 10 ? (\"0\" + (date.getDate())) : (date.getDate());\r\n    var month = (date.getMonth() + 1) < 10 ? (\"0\" + (date.getMonth() + 1)) : (date.getMonth() + 1);\r\n    var year = date.getFullYear()\r\n    // console.log(year, month, day);\r\n\r\n\r\n    var thisweek = year + \"-\" + month + \"-\" + day;\r\n    // console.log(thisweek);\r\n    // load event data\r\n    this.setState({\r\n      startDate: thisweek,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    var { ...config } = this.state;\r\n    return (\r\n      <div>\r\n        <div>\r\n          {/* <Modal \r\n            isOpen={this.state.isOpen}\r\n            onRequestClose={this.showModal}\r\n            shouldCLooseOnOverlayClick={this.hideModal}>\r\n            <h1>Modal Title</h1>\r\n            <h2>Modal Body</h2>\r\n            <h4>Start date {this.state.modalStartDate}</h4>\r\n            <h4>End date {this.state.modalEndDate}</h4>\r\n            <button onClick={this.hideModal}></button>\r\n          </Modal> */}\r\n          <CustModal\r\n            isOpen={this.state.isOpen}\r\n            onRequestClose={this.showModal}\r\n            shouldCLooseOnOverlayClick={this.hideModal}\r\n            onClickFunction={this.hideModal}\r\n            modalStartDate={this.state.modalStartDate}\r\n            modalEndDate={this.state.modalEndDate} />\r\n        </div>\r\n        <button onClick={this.showModal}>\r\n          Open\r\n        </button>\r\n        <div style={styles.wrap}>\r\n          <div style={styles.left}>\r\n            <DayPilotNavigator\r\n              selectMode={\"week\"}\r\n              showMonths={2}\r\n              skipMonths={2}\r\n              onTimeRangeSelected={args => {\r\n                this.setState({\r\n                  startDate: args.day\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n          <div style={styles.main}>\r\n            <DayPilotCalendar\r\n              {...config}\r\n              ref={component => {\r\n                this.calendar = component && component.control;\r\n              }}\r\n            />\r\n          <AmplifySignOut />\r\n          </div>\r\n        </div></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuthenticator(App);\r\n// export default App;","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModal.js",["40"],"import './Modal.css';\r\nimport React, { Component } from 'react';\r\nimport Modal from 'react-modal'\r\nimport axios from 'axios'\r\nimport CustModalCheckbox from './CustModalCheckbox'\r\nimport CustModalDropdown from './CustModalDropdown'\r\n\r\nclass CustModal extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.state = {\r\n            customers: [],\r\n            modalStartDate: \"\",\r\n            TimePref: \"\",\r\n            allCustomers: [],\r\n            selectedCustomer: 0\r\n        }\r\n\r\n        this.getCustomers = this.getCustomers.bind(this);\r\n        this.updateCalled = this.updateCalled.bind(this);\r\n        this.getAllCustomers = this.getAllCustomers.bind(this);\r\n        this.updateSelectedCustomer = this.updateSelectedCustomer.bind(this);\r\n        this.postBooking = this.postBooking.bind(this);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.modalStartDate != this.props.modalStartDate) {\r\n            console.log(\"modal date changed prevState = \" + prevState.modalStartDate + \"props modalstartdate = \" + this.props.modalStartDate)\r\n            this.setState({ modalStartDate: this.props.modalStartDate })\r\n            console.log(\"new state start date =\" + this.state.modalStartDate)\r\n            this.getCustomers()\r\n        } else {\r\n            console.log(\"no change\")\r\n        }\r\n\r\n\r\n    }\r\n    getCustomers() {\r\n\r\n        // console.log(\"from component \" + this.state.modalStartDate)\r\n        // console.log(\"from component \" + (new Date(this.state.modalStartDate)).getDay())\r\n        let day = \"\"\r\n        let dayNumber = (new Date(this.props.modalStartDate)).getDay()\r\n        // console.log(\"day number = \" + dayNumber)\r\n        switch (dayNumber) {\r\n            case 0: day = \"SUN\"; break;\r\n            case 1: day = \"MON\"; break;\r\n            case 2: day = \"TUE\"; break;\r\n            case 3: day = \"WED\"; break;\r\n            case 4: day = \"THU\"; break;\r\n            case 5: day = \"FRI\"; break;\r\n            default: day = \"SAT\"; break;\r\n        }\r\n        // console.log(day)\r\n        // console.log(\"hours = \" + (new Date(this.state.modalStartDate)).getHours())\r\n        let time = (new Date(this.props.modalStartDate)).getHours()\r\n        let hour = \"\"\r\n        if (time < 10) {\r\n            hour = \"EM\"\r\n        }\r\n        else if (time >= 10 && time < 12) {\r\n            hour = \"LM\"\r\n        }\r\n        else if (time >= 12 && time < 16) {\r\n            hour = \"EA\"\r\n\r\n        } else if (time >= 16 && time < 18) {\r\n            hour = \"LA\"\r\n\r\n        } else if (time >= 18 && time < 20) {\r\n            hour = \"E\"\r\n        } else {\r\n            hour = \"N\"\r\n        }\r\n        axios.get(\"https://0q7lvp0ual.execute-api.ap-northeast-2.amazonaws.com/dev/getcustomerbytimepreference?TimePref=\" + day + \"-\" + hour)\r\n            .then(response => {\r\n                console.log(response.data)\r\n                const freshCustomers = response.data.message.Items.map(item => {\r\n                    return {\r\n                        'Id': item.Id,\r\n                        'ticked': false,\r\n                        'Name': item.Name\r\n                    }\r\n                })\r\n                // .map(items => items.Name)\r\n                this.setState({\r\n                    customers: freshCustomers,\r\n                    TimePref: response.data.TimePref,\r\n                })\r\n\r\n\r\n\r\n            })\r\n            .catch(error => console.error(error))\r\n\r\n        // console.log(\"customer list = \" + customerlist)\r\n    }\r\n    getAllCustomers() {\r\n        axios.get(\"https://0q7lvp0ual.execute-api.ap-northeast-2.amazonaws.com/dev/getallcustomers\")\r\n            .then(response => {\r\n                // console.log(response.data)\r\n                const freshAllCustomers = response.data.item.Items.map(item => {\r\n                    return {\r\n                        'Id': item.Id,\r\n                        'Name': item.Name\r\n                    }\r\n                })\r\n                console.log(\"get all custoomers \", freshAllCustomers)\r\n                // .map(items => items.Name)\r\n                this.setState({\r\n                    allCustomers: freshAllCustomers,\r\n                    selectedCustomer: freshAllCustomers[0].Id\r\n                })\r\n            })\r\n            .catch(error => console.error(error))\r\n\r\n\r\n    }\r\n\r\n    updateCalled(id) {\r\n        this.setState(prevState => {\r\n            const updatedCustomers = prevState.customers.map(customer => {\r\n                if (customer.Id === id) {\r\n                    console.log(\"hit\")\r\n                    return {\r\n                        ...customer,\r\n                        ticked: !customer.ticked\r\n                    }\r\n                } return customer\r\n            })\r\n            console.log(\"update clicked\")\r\n            console.log(prevState.customers)\r\n            console.log(updatedCustomers)\r\n            return {\r\n                customers: updatedCustomers\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    updateSelectedCustomer(event) {\r\n        console.log(\"checking type\", event.target.value)\r\n        this.setState({ selectedCustomer: event.target.value })\r\n        console.log(\"event changed to\", this.state.selectedCustomer)\r\n    }\r\n\r\n    postBooking() {\r\n        const StartDate = ((new Date(this.props.modalStartDate)).getTime() / 1000);\r\n        console.log(StartDate)\r\n        const EndDate = ((new Date(this.props.modalEndDate)).getTime() / 1000);\r\n        console.log(EndDate)\r\n        const customer = this.state.selectedCustomer\r\n        axios.post(\"https://0q7lvp0ual.execute-api.ap-northeast-2.amazonaws.com/dev/putnewbooking?StartTime=\" + StartDate + \"&EndTime=\" + EndDate + \"&CustId=\" + customer)\r\n            .then(function (response) {\r\n                console.log(response);\r\n            })\r\n\r\n\r\n        this.props.onClickFunction();\r\n    }\r\n    componentDidMount() {\r\n        this.getCustomers()\r\n        this.getAllCustomers()\r\n    }\r\n\r\n    render() {\r\n        console.log(\"inside render customers = \" + this.state.customers)\r\n        const torender = this.state.customers.map(item =>\r\n            // console.log(item.Id+\" \"+item.Name))\r\n            <CustModalCheckbox\r\n                key={item.Id}\r\n                customer={item}\r\n                updateCalled={this.updateCalled} />\r\n        )\r\n        const selectionToRender = this.state.allCustomers.map(customer =>\r\n            <CustModalDropdown\r\n                key={customer.Id}\r\n                customer={customer} />\r\n        )\r\n        return (\r\n\r\n            <div>\r\n                <Modal\r\n                    isOpen={this.props.isOpen}\r\n                    onRequestClose={() => this.props.showModal}\r\n                    shouldCLooseOnOverlayClick={() => this.props.hideModal}>\r\n                    <h1>New Booking</h1>\r\n                    <h4>Date: {(this.props.modalStartDate).substring(0, 10)}</h4>\r\n                    <h4>Start time: {(this.props.modalStartDate).substring(11, 16)} - {(this.props.modalEndDate).substring(11, 16)}</h4>\r\n                    <h2>Select a customer to book below</h2>\r\n                    <div>\r\n                        {torender}\r\n                    </div>\r\n                    <br></br>\r\n                    <div>\r\n                        <table>\r\n                            <tr>\r\n\r\n                                <select\r\n                                    value={this.state.selectedCustomer}\r\n                                    onChange={this.updateSelectedCustomer}\r\n                                >\r\n                                    {selectionToRender}\r\n                                </select>\r\n\r\n                            </tr>\r\n                            <td>\r\n                                <button onClick={this.postBooking}>Confirm</button>\r\n\r\n                            </td><td>\r\n\r\n                                <button onClick={() => this.props.onClickFunction()}>Close</button>\r\n                            </td>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default CustModal\r\n\r\n\r\n","C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModalDropdown.js",["41"],"import React, { Component } from 'react'\r\n\r\nclass CustModalDropdown extends Component {\r\n    constructor() {\r\n        super()\r\n      \r\n    }\r\n    render() {\r\n        return (\r\n            \r\n                <option\r\n                    value={this.props.customer.Id}\r\n                >\r\n                    {this.props.customer.Name}\r\n                </option>\r\n            \r\n        )\r\n    }\r\n\r\n}\r\nexport default CustModalDropdown",["42","43"],"C:\\Users\\User\\Documents\\Git\\physio-app\\src\\CustModalCheckbox.js",["44"],"import React, { Component } from 'react'\r\n\r\nclass CustModalCheckbox extends Component {\r\n    constructor() {\r\n        super()\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n               <p> {this.props.customer.Name}</p> \r\n               Called\r\n                <input\r\n                    type=\"checkbox\"\r\n                    checked={this.props.customer.ticked}\r\n                    onChange={() => this.props.updateCalled(this.props.customer.Id)}\r\n                >\r\n                </input>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default CustModalCheckbox",{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","replacedBy":"48"},{"ruleId":"49","severity":1,"message":"50","line":133,"column":43,"nodeType":"51","messageId":"52","endLine":133,"endColumn":45},{"ruleId":"53","severity":1,"message":"54","line":134,"column":7,"nodeType":"55","messageId":"56","endLine":134,"endColumn":39},{"ruleId":"49","severity":1,"message":"57","line":27,"column":38,"nodeType":"51","messageId":"52","endLine":27,"endColumn":40},{"ruleId":"58","severity":1,"message":"59","line":4,"column":5,"nodeType":"60","messageId":"61","endLine":7,"endColumn":6},{"ruleId":"45","replacedBy":"62"},{"ruleId":"47","replacedBy":"63"},{"ruleId":"58","severity":1,"message":"59","line":4,"column":5,"nodeType":"60","messageId":"61","endLine":6,"endColumn":6},"no-native-reassign",["64"],"no-negated-in-lhs",["65"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-fallthrough","Expected a 'break' statement before 'default'.","SwitchCase","default","Expected '!==' and instead saw '!='.","no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor",["64"],["65"],"no-global-assign","no-unsafe-negation"]